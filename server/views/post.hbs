<div>
    <p><img src="{{post.imageUri}}" class="img-circle"></p>
    <p>{{post.createdAt}}</p>
    <hr>
    <p>{{post.content}}</p>

    <p>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="modal fade" id="myModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header bg-danger">
                                <h1>Delete</h1>
                            </div>
                            <div class="modal-body">
                                Are you sure you want to delete this post ?
                            </div>
                            <div class="modal-footer">
                                <input class="btn btn-primary" data-dismiss="modal" value="No">
                                <input onclick="deletePost({{post.userId}}, {{post.id}})" class="btn btn-danger btn-ok"
                                       data-dismiss="modal" value="Yes">
                            </div>
                        </div>
                    </div>
                </div>
                {{#if_eq post.userId currentUser.id}}
                    <a href="#" class="btn btn-danger" data-toggle="modal" data-target="#myModal">Delete</a>
                {{else}}
                    {{#if currentUser.role}}
                        <a href="#" class="btn btn-danger" data-toggle="modal" data-target="#myModal">Delete</a>
                    {{/if}}
                {{/if_eq}}
            </div>
        </div>
    </div>
    {{#if_eq post.userId currentUser.id}}
        <form method="POST" action="/update_post" style="text-align: right">
            <input type="hidden" name="postId" value={{post.id}} />
            <input type="hidden" name="userId" value={{post.userId}} />
            <input type="submit" value="Update"/>
        </form>
    {{else}}
        {{#if currentUser.role}}
            <form method="POST" action="/update_post" style="text-align: right">
                <input type="hidden" name="postId" value={{post.id}} />
                <input type="hidden" name="userId" value={{post.userId}} />
                <input type="submit" value="Update"/>
            </form>
        {{/if}}
    {{/if_eq}}


    </p>
    <p><b>Comment Section</b></p>
    <p><a class="btn btn-info" href="/posts/{{post.id}}/new_comment">Leave Comment</a></p>

    {{#each post.comments}}
        <div class="media">
            <img class="mr-3 img-circle" src="/images/585e4bf3cb11b227491c339a.png" alt="Generic placeholder image">
            <div class="media-body">
                <h5 class="mt-0">{{commenterUsername}}</h5>
                <p>{{content}}</p>
                {{#if ../currentUser.role}}
                    <p>
                    <form method="POST"
                          action="/tmp/users/{{userId}}/posts/{{postId}}/comments/{{id}}">
                        <input type="submit" value="Delete"/>
                    </form>
                    <form method="POST" action="/update_comment">
                        <input type="hidden" name="commentId" value={{id}} />
                        <input type="hidden" name="postId" value={{postId}} />
                        <input type="hidden" name="userId" value={{userId}} />
                        <input type="submit" value="Update"/>
                    </form>
                    </p>
                {{else}}
                    {{#if_eq ../currentUser.username commenterUsername}}
                        <p>
                        <form method="POST"
                              action="/tmp/users/{{userId}}/posts/{{postId}}/comments/{{id}}">
                            <input type="submit" value="Delete"/>
                        </form>
                        <form method="POST" action="/update_comment">
                            <input type="hidden" name="commentId" value={{id}} />
                            <input type="hidden" name="postId" value={{postId}} / >
                            <input type="hidden" name="userId" value={{userId}} />
                            <input type="submit" value="Update"/>
                        </form>
                        </p>
                    {{/if_eq}}
                {{/if}}

            </div>
        </div>
    {{/each}}
</div>
<script type='text/javascript' src='/javascripts/on_delete.js'></script>
